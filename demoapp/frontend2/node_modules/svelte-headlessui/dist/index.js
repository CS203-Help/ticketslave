import{derived as Ct,writable as Mt}from"svelte/store";import{derived as pt}from"svelte/store";var D=t=>o=>e=>e?o.setAttribute(t,e):o.removeAttribute(t),w=t=>o=>e=>e===void 0?o.removeAttribute(t):o.setAttribute(t,e.toString());var ct=D("aria-activedescendant"),_=t=>o=>pt(t,e=>e.items[e.active]?.id??"").subscribe(ct(o));import{derived as mt}from"svelte/store";var Pe=D("aria-controls"),R=t=>o=>mt(t,e=>e.controls).subscribe(Pe(o));import{derived as dt}from"svelte/store";var ft=w("aria-disabled"),xe=t=>o=>dt(t,e=>e.items.find(n=>n.id===o.id)?.disabled).subscribe(ft(o));import{derived as Be}from"svelte/store";import{derived as ut}from"svelte/store";var we=" ",ke="Enter";var Ie="Escape";var Se="ArrowLeft",Oe="ArrowUp",De="ArrowRight",Re="ArrowDown",Ke="Home",Fe="End";var Ue="PageUp",Ne="PageDown",ge="Tab";var Te=t=>o=>{o&&requestAnimationFrame(()=>{t.focus({preventScroll:!0})})},je=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"];function qe(t){if(t.key!==ge)return;let o=t.currentTarget,e=t.target;if(!o.contains(e))return;let n=[...o.querySelectorAll(je.join(","))],r=n[0],l=n[n.length-1];e===r&&t.shiftKey&&(l.focus(),t.preventDefault()),e===l&&!t.shiftKey&&(r.focus(),t.preventDefault())}var Ve=t=>o=>ut(t,e=>e.expanded).subscribe(e=>{if(e){let n=o.querySelector(je.join(","));n&&requestAnimationFrame(()=>n.focus()),o.addEventListener("keydown",qe)}else o.removeEventListener("keydown",qe)});var I={expanded:!1,opened:!1},bt=w("aria-expanded"),K=t=>o=>Be(t,e=>e.expanded).subscribe(bt(o)),G=t=>o=>Be(t,e=>e.expanded).subscribe(Te(o)),F=t=>o=>Be(t,e=>e.opened&&!e.expanded).subscribe(Te(o));import{derived as xt}from"svelte/store";var vt=D("aria-label"),C=t=>o=>xt(t,e=>e.label).subscribe(vt(o));import{derived as yt}from"svelte/store";var J={selected:null},ht=w("aria-selected"),We=(t,o)=>e=>yt(t,n=>n.selected===o).subscribe(ht(e));function f(t,o){let e=o.map(n=>n(t));return()=>e.forEach(n=>n())}var Et=t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},ze=t=>{},T=(t,o=Et)=>(...e)=>n=>{t.includes(n.key)&&(e.forEach(r=>r()),o&&o(n))};var S=T([Ie]);var He=T([ge]),_e=T([ge],ze);var Q=()=>({items:[],active:-1});function X(t){return o=>()=>t(o)}var Y=(t,o)=>({items:t.items.filter(e=>e.id!==o.id)}),W=t=>t.active===-1||t.items.length===0?void 0:t.active>=t.items.length?t.items[t.active]:t.items[t.active].value,Z=(t,o,...e)=>n=>{let r=n.target.closest(t);o(r),e.forEach(l=>l())};function $(t,o){if(t.active===-1||t.items[t.active].disabled)return{};let e=W(t);if(o){let n=new CustomEvent("select",{detail:{selected:e}});o.dispatchEvent(n)}return{selected:e}}function Lt(t,o){let e=t.textContent?.trim()??"";return{text:e,value:o?.value||e,disabled:o?.disabled??!1}}var ee=t=>t.items.findIndex(o=>!o.disabled),te=t=>{let o=t.active===-1?t.items.length:t.active;for(;--o>-1;)if(!t.items[o].disabled)return o;return t.active},oe=t=>{let o=t.active;for(;++o<t.items.length;)if(!t.items[o].disabled)return o;return t.active},re=t=>At(t.items,o=>!o.disabled);function At(t,o){let e=t.length;for(;e--;)if(o(t[e],e,t))return e;return-1}var ne=(t,o,e)=>n=>{let r=o(),l=Lt(t,n),i=r.items.find(p=>p.id===t.id);if(i){if(i.text===l.text&&i.value===l.value&&i.disabled===l.disabled)return;Object.assign(i,l)}else r.items.push({id:t.id,...l});e({items:r.items})},ie=(t,o)=>e=>{let n=t();o(e?n.items.findIndex(r=>r.id===e.id&&!r.disabled):-1)},Ce=(t,o,e=!1)=>n=>{let r=t(),l=r.active===-1?r.items:r.items.slice(r.active+1).concat(r.items.slice(0,r.active+1)),i=new RegExp(`${e?"^":""}${n}`,"i"),p=l.findIndex(m=>m.text.match(i)&&!m.disabled);if(p>-1){let m=(p+r.active+1)%r.items.length;o(m)}};var gt=0;function Tt(){return++gt}function u(t,o){return t.id||(t.id=`${o}:${Tt()}`),t}var de=(t,o,e,n=!1)=>(t.addEventListener(o,e,n),()=>t.removeEventListener(o,e,n));var k=t=>o=>de(o,"click",t);function U(t,o){return e=>{let n=null;function r(p){p.pointerType!==""&&(n&&!e.contains(n)&&e.clientWidth&&(o&&p.target instanceof Node&&o(p.target)&&p.stopImmediatePropagation(),p.preventDefault(),t(p)),n=null)}function l(p){p.isPrimary&&(n=p.target)}let i=[de(document.documentElement,"pointerdown",l,!0),de(document.documentElement,"click",r,!0)];return()=>i.forEach(p=>p())}}var Ge=t=>o=>de(o,"input",e=>{let n=e.target;t(n.value)});function L(...t){let o=e=>{for(let n of t)n(e)};return e=>(e.addEventListener("keydown",o),()=>e.removeEventListener("keydown",o))}function ve(t){return o=>{let e=()=>t();return o.addEventListener("pointerout",e),()=>o.removeEventListener("pointerout",e)}}function ye(t,o){return e=>{let n=r=>{if(r.target!==e){let l=r.target.closest(t);o(l)}};return e.addEventListener("pointermove",n),()=>e.removeEventListener("pointermove",n)}}var O=()=>{};var N=()=>t=>(t.setAttribute("aria-haspopup","true"),O);var b=t=>o=>(o.setAttribute("role",t),O);var y=(t=-1)=>o=>(o.tabIndex=t,O);var P=t=>o=>(o.setAttribute("type",t),O);import{derived as kt}from"svelte/store";var Ht=t=>o=>{o&&(t.value=o)},Je=(t,o)=>e=>kt(t,n=>n.expanded?null:n.selected).subscribe(n=>Ht(e)(o(n)));import{tick as Pt}from"svelte";var H=t=>"headlessui-"+t;var Qe=T([ke]);var Xe=T([Ke,Ue]),Ye=T([Fe,Ne]);var Ze=T([Se]),$e=T([De]);var he=T([Oe]),Ee=T([Re]);var ae=(t,o,e,n,r="vertical")=>{let l=Xe(t),i=r==="vertical"?he(o):Ze(o),p=r==="vertical"?Ee(e):$e(e),m=Ye(n);return x=>{l(x),i(x),p(x),m(x)}};function qr(t){let o=H("combobox"),e={...Q(),...I,...J,...t,filter:"",moved:!1},n=Mt(e),r=s=>n.set(e={...e,...s}),l=()=>r({expanded:!0,opened:!0,active:e.items.findIndex(s=>s.value===e.selected)}),i=()=>r({expanded:!1,active:-1}),p=()=>e.expanded?i():l(),m=(s,A=!1)=>{e.active!==s&&r({expanded:e.expanded||A,active:s})},x=()=>m(ee(e),!0),M=()=>m(e.active===-1?e.items.findIndex(s=>s.value===e.selected):te(e),!0),c=()=>m(e.active===-1?e.items.findIndex(s=>s.value===e.selected):oe(e),!0),v=()=>m(re(e),!0),q=()=>m(-1),se=()=>{r({filter:"",expanded:!1})},le=async s=>{let A=e.active===-1?e.selected:e.items[e.active].value;r({filter:s,expanded:!0,opened:!0}),await Pt();let h=e.items.findIndex(fe=>fe.value===e.selected),g=e.items.findIndex(fe=>fe.value===A),me=e.items.length?e.moved||h===-1?g===-1?0:g:h:-1;e.active!==me&&r({active:me})},j=ie(()=>e,m),z=s=>r(Y(e,s)),V=()=>r($(e,e.input));function pe(s){return u(s,o),r({input:s}),{destroy:f(s,[P("text"),b("combobox"),y(0),C(n),K(n),R(n),Je(n,h=>h?.name),L(Qe(V,p),S(i),ae(x,M,c,v),_e(V,i)),Ge(le),F(n)])}}function ce(s){return u(s,o),r({button:s}),{destroy:f(s,[P("button"),b("button"),N(),y(-1),K(n),R(n),k(p),h=>{let g=()=>e.input?.focus();return h.addEventListener("focus",g),()=>h.removeEventListener("focus",g)}])}}function d(s){return u(s,o),r({controls:s.id}),{destroy:f(s,[b("listbox"),y(-1),U(i,h=>e.button?.contains(h)),k(Z('[role="option"]',j,V,i)),ye('[role="option"]',j),ve(q),_(n)])}}function a(s,A){u(s,o);let h=ne(s,()=>e,r);h(A);let g=f(s,[y(-1),b("option"),xe(n),X(z)]);return{update:h,destroy:g}}let{subscribe:E}=Ct(n,s=>{let{expanded:A,selected:h,filter:g}=s;return{expanded:A,selected:h,filter:g,active:W(s)}});return{subscribe:E,input:pe,button:ce,items:d,item:a,reset:se,open:l,close:i,set:r}}import{derived as It,writable as St}from"svelte/store";import{derived as Bt}from"svelte/store";var wt=w("aria-modal"),et=t=>o=>Bt(t,e=>e.expanded).subscribe(wt(o));function nn(t){let o=H("dialog"),e={...I,...t},n=St(e),r=x=>n.set(e={...e,...x}),l=()=>r({expanded:!0,opened:!0}),i=()=>r({expanded:!1});function p(x){return u(x,o),{destroy:f(x,[b("dialog"),et(n),C(n),Ve(n),U(i),L(S(i))])}}let{subscribe:m}=It(n,x=>{let{expanded:M}=x;return{expanded:M}});return{subscribe:m,modal:p,open:l,close:i,set:r}}import{derived as Ot,writable as Dt}from"svelte/store";var B=T([we,ke]);function kn(t){let o=H("disclosure"),e={...I,...t},n=Dt(e),r=c=>n.set(e={...e,...c}),l=()=>r({expanded:!0,opened:!0}),i=()=>r({expanded:!1}),p=()=>e.expanded?i():l();function m(c){return u(c,o),r({button:c.id}),{destroy:f(c,[P("button"),b("button"),N(),y(0),K(n),C(n),R(n),k(p),L(S(i),B(p)),F(n)])}}function x(c){return u(c,o),r({panel:c.id,controls:c.id}),{destroy:f(c,[G(n)])}}let{subscribe:M}=Ot(n,c=>{let{expanded:v}=c;return{expanded:v}});return{subscribe:M,button:m,panel:x,open:l,close:i,set:r}}import{derived as Rt,writable as Kt}from"svelte/store";var tt=t=>/^\S$/.test(t);var Me=t=>{let o,e="";return n=>{let{key:r}=n;tt(r)&&(o&&clearTimeout(o),e+=r,t(e),o=window.setTimeout(()=>{o=0,e=""},350))}};function oi(t){let o=H("listbox"),e={...Q(),...I,...J,...t},n=Kt(e),r=a=>n.set(e={...e,...a}),l=()=>r({expanded:!0,opened:!0,active:e.items.findIndex(a=>a.value===e.selected)}),i=()=>r({expanded:!1}),p=()=>e.expanded?i():l(),m=a=>e.active!==a&&r({active:a}),x=()=>m(ee(e)),M=()=>m(te(e)),c=()=>m(oe(e)),v=()=>m(re(e)),q=()=>m(-1),se=Ce(()=>e,m),le=ie(()=>e,m),j=a=>r(Y(e,a)),z=()=>r($(e,e.button));function V(a){return u(a,o),r({button:a}),{destroy:f(a,[P("button"),b("button"),N(),y(0),C(n),K(n),R(n),k(p),L(B(p),he(p),Ee(p)),F(n)])}}function pe(a){return u(a,o),r({controls:a.id}),{destroy:f(a,[b("listbox"),y(0),U(i,s=>e.button?.contains(s)),k(Z('[role="option"]',le,z,i)),ye('[role="option"]',le),ve(q),L(B(z,i),S(i),ae(x,M,c,v),He(O),Me(se)),G(n),_(n)])}}function ce(a,E){u(a,o);let s=ne(a,()=>e,r);s(E);let A=f(a,[y(-1),b("option"),xe(n),X(j)]);return{update:s,destroy:A}}let{subscribe:d}=Rt(n,a=>{let{expanded:E,selected:s}=a;return{expanded:E,selected:s,active:W(a)}});return{subscribe:d,button:V,items:pe,item:ce,open:l,close:i,set:r}}import{derived as Ft,writable as Ut}from"svelte/store";function Bi(t){let o=H("menu"),e={...Q(),...I,...J,...t},n=Ut(e),r=a=>n.set(e={...e,...a}),l=()=>r({expanded:!0,opened:!0}),i=()=>r({expanded:!1,active:-1}),p=()=>e.expanded?i():l(),m=(a,E=!1)=>e.active!==a&&r({expanded:e.expanded||E,active:a}),x=()=>m(ee(e),!0),M=()=>m(te(e),!0),c=()=>m(oe(e),!0),v=()=>m(re(e),!0),q=()=>r($(e,e.button)),se=()=>m(-1),le=Ce(()=>e,m,!0),j=ie(()=>e,m),z=a=>r(Y(e,a));function V(a){return u(a,o),r({button:a}),{destroy:f(a,[P("button"),b("button"),N(),y(0),C(n),K(n),R(n),k(p),L(B(p),he(v),Ee(x)),F(n)])}}function pe(a){return u(a,o),r({controls:a.id}),{destroy:f(a,[b("menu"),y(0),U(i,s=>e.button?.contains(s)),k(Z('[role="menuitem"]',j,q,i)),ye('[role="menuitem"]',j),ve(se),L(B(q,i),S(i),ae(x,M,c,v),He(O),Me(le)),G(n),_(n)])}}function ce(a,E){u(a,o);let s=ne(a,()=>e,r);s(E);let A=f(a,[y(-1),b("menuitem"),xe(n),X(z)]);return{update:s,destroy:A}}let{subscribe:d}=Ft(n,a=>{let{expanded:E}=a;return{expanded:E,active:W(a)}});return{subscribe:d,button:V,items:pe,item:ce,open:l,close:i,set:r}}import{derived as Nt,writable as qt}from"svelte/store";function Ji(t){let o=H("popover"),e={...I,...t},n=qt(e),r=c=>n.set(e={...e,...c}),l=()=>r({expanded:!0,opened:!0}),i=()=>r({expanded:!1}),p=()=>e.expanded?i():l();function m(c){return u(c,o),r({button:c}),{destroy:f(c,[P("button"),b("button"),N(),y(0),K(n),C(n),R(n),k(p),L(S(i),B(p)),F(n)])}}function x(c){return u(c,o),r({panel:c.id,controls:c.id}),{destroy:f(c,[b("menu"),U(i,q=>e.button?.contains(q)),G(n)])}}let{subscribe:M}=Nt(n,c=>{let{expanded:v}=c;return{expanded:v}});return{subscribe:M,button:m,panel:x,open:l,close:i,set:r}}import{derived as Le,writable as Wt}from"svelte/store";import{derived as jt}from"svelte/store";var ot={orientation:"horizontal"},Vt=D("aria-oriantation"),rt=t=>o=>jt(t,e=>e.orientation).subscribe(Vt(o));function ya(t){let o=H("tabs"),e=H("tab"),n=H("panel"),r={tabs:[],panels:[],auto:!0,...Q(),...J,...ot,...t},l=Wt(r),i=d=>l.set(r={...r,...d}),p=d=>r.active!==d&&i({active:d}),m=()=>p(ee(r)),x=()=>p(te(r)),M=()=>p(oe(r)),c=()=>p(re(r)),v=()=>i($(r,r.tabs[r.selected])),q=()=>p(r.items.findIndex(d=>d.value===r.selected)),se=ie(()=>r,p);function le(){r.tabs[r.items.findIndex(a=>a.value===r.selected)].focus()}let j=d=>i(Y(r,d));function z(d){u(d,o);let a=s=>A=>Le(s,h=>h.auto&&h.active!==r.items.findIndex(g=>g.value===r.selected)).subscribe(v);return{destroy:f(d,[b("tablist"),C(l),rt(l),y(-1),k(Z('[role="tab"]',se,v)),L(B(v),ae(m,x,M,c,r.orientation)),_(l),a(l)])}}function V(d,a){u(d,e),i({tabs:[...r.tabs,d]}),ne(d,()=>r,i)(a);let s=r.items[r.items.length-1].value;r.selected===s&&i({active:r.tabs.length-1});let A=D("tabindex"),h=Ae=>ue=>Le(Ae,be=>be.selected===s?"0":"-1").subscribe(A(ue)),g=Ae=>ue=>Le(Ae,be=>be.panels[be.tabs.findIndex(lt=>lt===ue)]?.id).subscribe(Pe(ue)),me=Ae=>ue=>Le(Ae,be=>be.selected===s).subscribe(Te(ue));return{destroy:f(d,[P("button"),b("tab"),We(l,s),h(l),g(l),me(l)])}}function pe(d,a){u(d,n),i({panels:[...r.panels,d]});let E=D("aria-labelledby"),s=h=>g=>Le(h,me=>me.tabs[me.panels.findIndex(fe=>fe===g)].id).subscribe(E(g));return{destroy:f(d,[y(0),b("tabpanel"),s(l),X(j)])}}let{subscribe:ce}=Le(l,d=>{let{selected:a}=d;return{selected:a,active:W(d)}});return{subscribe:ce,list:z,tab:V,panel:pe,set:i}}import{derived as Qt,writable as Xt}from"svelte/store";import{derived as zt}from"svelte/store";var nt={checked:!1},_t=w("aria-checked"),it=t=>o=>zt(t,e=>e.checked).subscribe(_t(o));import{derived as Gt}from"svelte/store";var at={pressed:!1},Jt=w("aria-pressed"),st=t=>o=>Gt(t,e=>e.pressed).subscribe(Jt(o));function Ua(t){let o=H("switch"),e={...nt,...at,...t},n=Xt(e),r=c=>n.set(e={...e,...c}),l=()=>r({checked:!0}),i=()=>r({checked:!1}),p=()=>e.checked?i():l();function m(c){return u(c,o),{destroy:f(c,[P("button"),b("button"),y(0),st(n),C(n),k(p),L(B(p))])}}function x(c){return u(c,o),{destroy:f(c,[P("button"),b("switch"),y(0),C(n),it(n),k(p),L(B(p))])}}let{subscribe:M}=Qt(n,c=>{let{checked:v}=c;return{checked:v,pressed:v}});return{subscribe:M,button:m,toggle:x,set:r}}export{qr as createCombobox,nn as createDialog,kn as createDisclosure,oi as createListbox,Bi as createMenu,Ji as createPopover,Ua as createSwitch,ya as createTabs};
//# sourceMappingURL=index.js.map